<!--
    Lightning Calendar Core - Aura Component Example
    Shows how to integrate the calendar core into an Aura component
-->
<aura:component implements="flexipage:availableForAllPageTypes,force:hasRecordId" access="global">
    <!-- Attributes -->
    <aura:attribute name="calendar" type="Object" description="Calendar instance"/>
    <aura:attribute name="renderer" type="Object" description="Renderer instance"/>
    <aura:attribute name="events" type="List" default="[]" description="Calendar events"/>
    <aura:attribute name="currentView" type="String" default="month" description="Current calendar view"/>
    <aura:attribute name="recordId" type="String" description="Record Id if on record page"/>

    <!-- Handlers -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <!-- Load Lightning Calendar from Static Resource -->
    <ltng:require scripts="{!$Resource.LightningCalendar}"
                  afterScriptsLoaded="{!c.initializeCalendar}"/>

    <!-- Component Body -->
    <lightning:card title="Lightning Calendar" iconName="standard:event">
        <!-- Toolbar -->
        <aura:set attribute="actions">
            <lightning:buttonGroup>
                <lightning:button label="Today" onclick="{!c.goToToday}"/>
                <lightning:button label="Previous" onclick="{!c.goPrevious}"/>
                <lightning:button label="Next" onclick="{!c.goNext}"/>
            </lightning:buttonGroup>
            <lightning:buttonGroup>
                <lightning:button label="Month" onclick="{!c.setMonthView}" variant="{!v.currentView == 'month' ? 'brand' : 'neutral'}"/>
                <lightning:button label="Week" onclick="{!c.setWeekView}" variant="{!v.currentView == 'week' ? 'brand' : 'neutral'}"/>
                <lightning:button label="Day" onclick="{!c.setDayView}" variant="{!v.currentView == 'day' ? 'brand' : 'neutral'}"/>
            </lightning:buttonGroup>
        </aura:set>

        <!-- Calendar Container -->
        <div class="slds-p-around_medium">
            <div aura:id="calendarContainer" class="calendar-container" style="min-height: 500px;">
                <!-- Calendar will be rendered here -->
            </div>
        </div>

        <!-- Add Event Button -->
        <aura:set attribute="footer">
            <lightning:button label="Add Event"
                            variant="brand"
                            onclick="{!c.handleAddEvent}"
                            iconName="utility:add"/>
        </aura:set>
    </lightning:card>

    <!-- Event Creation Modal -->
    <aura:if isTrue="{!v.showEventModal}">
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 class="slds-text-heading_medium">New Event</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <lightning:input label="Event Title"
                                   aura:id="eventTitle"
                                   required="true"/>
                    <lightning:input type="datetime-local"
                                   label="Start Date/Time"
                                   aura:id="eventStart"
                                   required="true"/>
                    <lightning:input type="datetime-local"
                                   label="End Date/Time"
                                   aura:id="eventEnd"
                                   required="true"/>
                    <lightning:textarea label="Description"
                                       aura:id="eventDescription"/>
                </div>
                <footer class="slds-modal__footer">
                    <lightning:button label="Cancel" onclick="{!c.closeEventModal}"/>
                    <lightning:button variant="brand" label="Save" onclick="{!c.saveEvent}"/>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
</aura:component>