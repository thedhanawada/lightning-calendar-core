<template>
    <lightning-card title={calendarTitle} icon-name="standard:event">
        <!-- Controls -->
        <div slot="actions">
            <lightning-button-group>
                <lightning-button
                    label="Month"
                    data-view="month"
                    variant={isMonthView ? 'brand' : 'neutral'}
                    onclick={handleViewChange}>
                </lightning-button>
                <lightning-button
                    label="Week"
                    data-view="week"
                    variant={isWeekView ? 'brand' : 'neutral'}
                    onclick={handleViewChange}>
                </lightning-button>
                <lightning-button
                    label="Day"
                    data-view="day"
                    variant={isDayView ? 'brand' : 'neutral'}
                    onclick={handleViewChange}>
                </lightning-button>
                <lightning-button
                    label="List"
                    data-view="list"
                    variant={isListView ? 'brand' : 'neutral'}
                    onclick={handleViewChange}>
                </lightning-button>
            </lightning-button-group>

            <lightning-button-group class="slds-m-left_x-small">
                <lightning-button
                    icon-name="utility:chevronleft"
                    variant="neutral"
                    onclick={handlePrevious}>
                </lightning-button>
                <lightning-button
                    label="Today"
                    variant="neutral"
                    onclick={handleToday}>
                </lightning-button>
                <lightning-button
                    icon-name="utility:chevronright"
                    variant="neutral"
                    onclick={handleNext}>
                </lightning-button>
            </lightning-button-group>
        </div>

        <!-- Calendar Body -->
        <div class="slds-card__body slds-card__body_inner" style={containerStyle}>
            <!-- Month View -->
            <template if:true={isMonthView}>
                <div class="calendar-container">
                    <!-- Weekday Headers -->
                    <div class="calendar-weekdays">
                        <template for:each={weekDayNames} for:item="day">
                            <div key={day} class="calendar-weekday">{day}</div>
                        </template>
                    </div>

                    <!-- Month Grid -->
                    <div class="calendar-month">
                        <template for:each={monthViewData} for:item="week">
                            <div key={week} class="calendar-week">
                                <template for:each={week.days} for:item="day">
                                    <div
                                        key={day.date}
                                        class={day.isToday ? 'calendar-day today' : day.isOtherMonth ? 'calendar-day other-month' : 'calendar-day'}
                                        data-date={day.date}
                                        onclick={handleDateClick}>

                                        <div class="day-number">{day.dayNumber}</div>

                                        <template if:true={day.hasEvents}>
                                            <template for:each={day.events} for:item="event">
                                                <div
                                                    key={event.id}
                                                    class="calendar-event"
                                                    data-event-id={event.id}
                                                    onclick={handleEventClick}>
                                                    {event.title}
                                                </div>
                                            </template>
                                        </template>
                                    </div>
                                </template>
                            </div>
                        </template>
                    </div>
                </div>
            </template>

            <!-- Week View -->
            <template if:true={isWeekView}>
                <div class="slds-text-align_center slds-m-vertical_large">
                    <p class="slds-text-heading_small">Week view coming soon</p>
                </div>
            </template>

            <!-- Day View -->
            <template if:true={isDayView}>
                <div class="slds-text-align_center slds-m-vertical_large">
                    <p class="slds-text-heading_small">Day view coming soon</p>
                </div>
            </template>

            <!-- List View -->
            <template if:true={isListView}>
                <div class="slds-text-align_center slds-m-vertical_large">
                    <p class="slds-text-heading_small">List view coming soon</p>
                </div>
            </template>
        </div>
    </lightning-card>
</template>
