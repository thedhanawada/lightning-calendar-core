name: Check LWC Core Sync

on:
  push:
    branches: [ master, main ]
    paths:
      - 'packages/core/src/core/**'
      - 'packages/examples/salesforce-lwc/force-app/main/default/lwc/lightningCalendar/core/**'
  pull_request:
    branches: [ master, main ]
    paths:
      - 'packages/core/src/core/**'
      - 'packages/examples/salesforce-lwc/force-app/main/default/lwc/lightningCalendar/core/**'

jobs:
  check-sync:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Check if LWC core is in sync
      run: |
        echo "Checking if LWC core matches packages/core/src/core..."

        # Compare the two directories
        if diff -r packages/core/src/core/ packages/examples/salesforce-lwc/force-app/main/default/lwc/lightningCalendar/core/ > /dev/null 2>&1; then
          echo "✓ LWC core is in sync with main core"
          exit 0
        else
          echo "✗ LWC core is OUT OF SYNC with main core"
          echo ""
          echo "Please run: npm run sync:lwc"
          echo "Then commit the synced files"
          exit 1
        fi
